/*!
 * CustomAlert.js - A simple and powerful JavaScript alert system
* Author: Rajkumar Nimod
 * Website: https://rajkumarnimod.github.io/changealert/
 * Version: 1.0.0
 * License: MIT
 */
/* Please retain this header when using or modifying the file */

 !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ChangeAlert=t()}(this,function(){"use strict";let e={position:"top-right",timeout:5e3,type:"primary",theme:"light",icon:null,closeButton:!0,pauseOnHover:!0,draggable:!1,progressBar:!0,sound:!1,html:!1,animationIn:"fadeIn",animationOut:"fadeOut",onClick:null,onClose:null,onShow:null,onTimeout:null,rtl:!1,css:"",queue:!0,zIndex:999999,overlay:!1,overlayClose:!1,overlayColor:"rgba(0,0,0,0.5)",customIcon:null,customSound:null,buttons:null,focus:!0,fontFamily:"",fontSize:""},t={success:"✅",error:"❌",warning:"⚠️",info:"ℹ️",question:"❓",loading:"⏳",primary:"\uD83D\uDD35",secondary:"⚪"},o={success:"https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg",error:"https://actions.google.com/sounds/v1/alarms/beep_short.ogg",warning:"https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg",info:"https://actions.google.com/sounds/v1/cartoon/pop.ogg",question:"https://actions.google.com/sounds/v1/cartoon/slide_whistle_to_drum_hit.ogg",loading:"https://actions.google.com/sounds/v1/science_fiction/futuristic_spacecraft_takeoff.ogg",primary:"https://actions.google.com/sounds/v1/cartoon/pop.ogg",secondary:"https://actions.google.com/sounds/v1/cartoon/boing.ogg"},n=[],s=!1,r=null,a="light",l=new class l{constructor(){this.initContainer(),this.updateTheme()}initContainer(){if(!document.querySelector(".changealert-container")){let e=document.createElement("div");e.className="changealert-container top-right",document.body.appendChild(e)}}updateTheme(){let e=document.querySelector(".changealert-container");e&&e.setAttribute("data-changealert-theme",a)}setThemeMode(e){return("light"===e||"dark"===e)&&(a=e,this.updateTheme()),this}createOverlay(e,t,o){r||((r=document.createElement("div")).className="changealert-overlay",r.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: ${e};
        z-index: ${t-1};
        opacity: 0;
        transition: opacity 0.3s;
      `,o&&(r.style.cursor="pointer",r.addEventListener("click",()=>this.clear())),document.body.appendChild(r),setTimeout(()=>{r.style.opacity="1"},10))}removeOverlay(){r&&(r.style.opacity="0",setTimeout(()=>{r.remove(),r=null},300))}createAlert(e,o){let n=document.createElement("div"),s=`changealert ${o.type} ${o.rtl?"rtl":""}`;o.css&&!o.css.includes(":")&&(s+=` ${o.css}`),n.className=s,o.css&&o.css.includes(":")&&(n.style.cssText=o.css),o.fontFamily&&(n.style.fontFamily=o.fontFamily),o.fontSize&&(n.style.fontSize=o.fontSize),n.dataset.animationIn=o.animationIn,n.dataset.animationOut=o.animationOut;let r=o.customIcon||o.icon||t[o.type]||"";"string"==typeof r&&(r.startsWith("http")||r.startsWith("/"))&&(r=`<img src="${r}" alt="alert icon">`);let a=r?`<div class="changealert-icon">${r}</div>`:"",l=o.closeButton?'<button class="changealert-close" aria-label="Close">&times;</button>':"",i="";o.buttons&&Array.isArray(o.buttons)&&(i='<div class="changealert-buttons">',o.buttons.forEach(e=>{let t=e.style||"";i+=`<button class="${e.class||""}" style="${t}">${e.text}</button>`}),i+="</div>");let c=o.html?e:document.createTextNode(e).textContent;return n.innerHTML=`
        <div class="changealert-content">
          ${a}
          <div class="changealert-message">${c}</div>
        </div>
        ${l}
        ${i}
        ${o.progressBar?'<div class="changealert-progress"></div>':""}
      `,o.draggable&&this.makeDraggable(n),n}makeDraggable(e){let t=0,o=0,n=0,s=0,r=!1,a=t=>{0===t.button&&(t.preventDefault(),n=t.clientX,s=t.clientY,r=!0,document.onmouseup=i,document.onmousemove=l,e.style.transition="none",e.style.cursor="grabbing")},l=a=>{r&&(a.preventDefault(),t=n-a.clientX,o=s-a.clientY,n=a.clientX,s=a.clientY,e.style.top=e.offsetTop-o+"px",e.style.left=e.offsetLeft-t+"px")},i=()=>{document.onmouseup=null,document.onmousemove=null,r=!1,e.style.transition="transform 0.3s, opacity 0.3s",e.style.cursor="grab"};e.onmousedown=a,e.style.cursor="grab"}showAlert(e,t,o){let n=document.querySelector(".changealert-container");n.appendChild(e),e.style.zIndex=o,e.offsetWidth,e.classList.add(`changealert-${t}`),setTimeout(()=>{e.classList.remove(`changealert-${t}`)},300)}hideAlert(e,t,o){e.classList.add(`changealert-${t}`),setTimeout(()=>{e.style.opacity="0",setTimeout(()=>{e.remove(),o&&o()},300)},100)}setupProgressBar(e,t,o){if(!t||t<=0)return;let n=e.querySelector(".changealert-progress");if(!n)return;let s=Date.now(),r=!1,a=0,l,i=()=>{if(r)return;let a=Date.now()-s,c=Math.min(a/t,1);n.style.transform=`scaleX(${1-c})`,c>=1?(cancelAnimationFrame(l),o&&o(),this.hideAlert(e,e.dataset.animationOut)):l=requestAnimationFrame(i)};"true"===e.dataset.pauseOnHover&&(e.addEventListener("mouseenter",()=>{r=!0,a=Date.now(),cancelAnimationFrame(l)}),e.addEventListener("mouseleave",()=>{r=!1,s+=Date.now()-a,l=requestAnimationFrame(i)})),l=requestAnimationFrame(i)}processQueue(){if(s||0===n.length)return;s=!0;let{message:e,options:t,resolve:o}=n.shift();this.show(e,t).then(()=>{s=!1,o(),this.processQueue()})}show(t,o={}){return new Promise(s=>{let r={...e,...o};if(this.setContainerPosition(r.position,r.zIndex),r.overlay&&this.createOverlay(r.overlayColor,r.zIndex,r.overlayClose),r.queue&&n.length>0){n.push({message:t,options:r,resolve:s});return}let a=this.createAlert(t,r);if(a.dataset.pauseOnHover=r.pauseOnHover,(r.sound||r.customSound)&&this.playSound(r.type,r.customSound),this.showAlert(a,r.animationIn,r.zIndex),r.onShow&&r.onShow(a),r.focus&&setTimeout(()=>a.focus(),50),r.buttons&&r.buttons.forEach((e,t)=>{let o=a.querySelectorAll(".changealert-buttons button")[t];o&&e.action&&o.addEventListener("click",t=>{t.stopPropagation(),e.action(),!1!==e.closeOnClick&&this.hideAlert(a,r.animationOut)})}),r.timeout>0&&this.setupProgressBar(a,r.timeout,()=>{r.onTimeout&&r.onTimeout(),r.overlay&&this.removeOverlay(),s()}),r.closeButton){let l=a.querySelector(".changealert-close");l.addEventListener("click",()=>{this.hideAlert(a,r.animationOut,()=>{r.onClose&&r.onClose(),r.overlay&&this.removeOverlay(),s()})})}r.onClick&&a.addEventListener("click",e=>{e.target===a.querySelector(".changealert-close")||e.target.closest(".changealert-buttons")||r.onClick(e)}),a.setAttribute("role","alert"),a.setAttribute("aria-live","assertive"),a.tabIndex=0,a.addEventListener("keydown",e=>{if("Escape"===e.key&&r.closeButton){let t=a.querySelector(".changealert-close");t&&t.click()}}),r.timeout<=0&&s()})}primary(e,t={}){return this.show(e,{...t,type:"primary"})}secondary(e,t={}){return this.show(e,{...t,type:"secondary"})}success(e,t={}){return this.show(e,{...t,type:"success"})}error(e,t={}){return this.show(e,{...t,type:"error"})}warning(e,t={}){return this.show(e,{...t,type:"warning"})}info(e,t={}){return this.show(e,{...t,type:"info"})}question(e,t={}){return this.show(e,{...t,type:"question"})}loading(e,t={}){return this.show(e,{...t,type:"loading",timeout:0})}clear(){let e=document.querySelector(".changealert-container");if(e)for(;e.firstChild;)e.removeChild(e.firstChild);n=[],s=!1,this.removeOverlay()}playSound(e,t){let n=t||o[e];if(!n)return;let s=new Audio(n);s.play().catch(e=>console.warn("Sound playback failed:",e))}setContainerPosition(e,t){let o=document.querySelector(".changealert-container");o&&(o.className=`changealert-container ${e}`,o.style.zIndex=t)}applyTheme(e){return"string"==typeof e?document.documentElement.style.setProperty("--changealert-primary",e):"object"==typeof e&&Object.keys(e).forEach(t=>{document.documentElement.style.setProperty(`--changealert-${t}`,e[t])}),this}setIcons(e){return Object.keys(e).forEach(o=>{t[o]=e[o]}),this}setSounds(e){return Object.keys(e).forEach(t=>{o[t]=e[t]}),this}setFont(e,t=""){let o=document.querySelector(".changealert-container");return o&&(e&&(o.style.fontFamily=e),t&&(o.style.fontSize=t)),this}};return["show","primary","secondary","success","error","warning","info","question","loading","clear","applyTheme","setIcons","setSounds","setThemeMode","setFont"].forEach(e=>{l[e]=l[e].bind(l)}),l});